<!DOCTYPE html>
<!-- Forced rebuild - timestamp: 2025-07-10 -->
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
<meta name="theme-color" content="#1A3A2A">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
<title>Suruli Greens - Hydroponic Microgreens & Greens</title>
<link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;500;600;700;800&display=swap" rel="stylesheet">
<style>
    :root {
        --dark-green: #1A3A2A;
        --light-green: #7DA95A;
        --cream: #F5F1E3;
        --tan: #D9CBA3;
        --brown: #A67C39;
    }
    
    html {
        scroll-behavior: smooth;
    }
    
    * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
    }
    
    body {
        font-family: 'Montserrat', sans-serif;
        background-color: var(--cream);
        color: var(--dark-green);
        overflow-x: hidden;
    }
    
    body.menu-open {
        overflow: hidden;
    }
    
    .container {
        max-width: 1200px;
        margin: 0 auto;
        padding: 0 20px;
    }
    
    /* Header */
    header {
        background-color: var(--dark-green);
        padding: 20px 0;
        position: fixed;
        width: 100%;
        top: 0;
        z-index: 1000;
    }
    
    .header-content {
        display: flex;
        justify-content: space-between;
        align-items: center;
    }
    
    .logo {
        color: var(--cream);
        font-size: 28px;
        font-weight: 800;
        text-transform: uppercase;
        letter-spacing: 1px;
    }
    
    nav ul {
        display: flex;
        list-style: none;
    }
    
    nav ul li {
        margin-left: 40px;
    }
    
    nav ul li a {
        color: var(--cream);
        text-decoration: none;
        font-weight: 500;
        font-size: 18px;
        transition: color 0.3s;
    }
    
    nav ul li a:hover {
        color: var(--light-green);
    }
    
    .order-btn {
        background-color: var(--light-green);
        color: var(--cream);
        padding: 12px 25px;
        border-radius: 30px;
        font-weight: 600;
        text-decoration: none;
        transition: background-color 0.3s;
    }
    
    .order-btn:hover {
        background-color: #6A9248;
    }
    
    /* Hero Section - Split Design */
    .hero {
        height: 100vh;
        display: flex;
        margin-top: 80px;
    }
    
    .hero-image {
        flex: 1;
        background-color: #f0f0f0;
        position: relative;
        overflow: hidden;
    }
    
    .hero-image::before {
        content: "";
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background-image: url('assets/images/categories/Microgreens.jpeg'); /* Replace with per-category hero if provided later */
        background-size: cover;
        background-position: center;
    }
    
    .hero-content {
        flex: 1;
        background-color: var(--dark-green);
        display: flex;
        flex-direction: column;
        justify-content: center;
        padding: 0 60px;
        position: relative;
        overflow: hidden;
    }
    
    /* Leaf illustrations */
    .leaf {
        position: absolute;
        stroke: var(--light-green);
        stroke-width: 1;
        fill: none;
        opacity: 0.3;
    }
    
    .leaf-1 {
        top: 10%;
        right: 10%;
        width: 120px;
    }
    
    .leaf-2 {
        bottom: 15%;
        left: 5%;
        width: 100px;
        transform: rotate(45deg);
    }
    
    .leaf-3 {
        bottom: 30%;
        right: 5%;
        width: 150px;
        transform: rotate(-15deg);
    }
    
    .hero-text {
        position: relative;
        z-index: 2;
    }
    
    .hero-text h1 {
        color: var(--cream);
        font-size: 80px;
        font-weight: 800;
        line-height: 1;
        margin-bottom: 20px;
        text-transform: uppercase;
    }
    
    .hero-text p {
        color: var(--cream);
        font-size: 16px;
        margin-bottom: 40px;
        max-width: 500px;
    }
    
    .cta-buttons {
        display: flex;
        gap: 20px;
    }
    
    .btn {
        display: inline-block;
        padding: 15px 30px;
        border-radius: 30px;
        font-weight: 600;
        text-decoration: none;
        text-transform: uppercase;
        letter-spacing: 1px;
        transition: all 0.3s ease;
    }
    
    .btn-primary {
        background-color: var(--light-green);
        color: var(--cream);
    }
    
    .btn-primary:hover {
        background-color: #6A9248;
        transform: translateY(-3px);
    }
    
    .btn-secondary {
        background-color: var(--tan);
        color: var(--dark-green);
    }
    
    .btn-secondary:hover {
        background-color: #c8b992;
        transform: translateY(-3px);
    }
    
    /* Second Section - Cream Background */
    .second-section {
        background-color: var(--cream);
        padding: 100px 0;
    }
    
    .second-content {
        display: flex;
        gap: 50px;
    }
    
    .second-text {
        flex: 1;
    }
    
    .second-image {
        flex: 1;
        position: relative;
    }
    
    .second-image img {
        width: 100%;
        height: auto;
        border-radius: 10px;
    }
    
    .green-title {
        color: var(--light-green);
        font-size: 24px;
        font-weight: 700;
        margin-bottom: 20px;
        text-transform: uppercase;
    }
    
    .brown-title {
        color: var(--brown);
        font-size: 60px;
        font-weight: 800;
        line-height: 1.1;
        margin-bottom: 30px;
        text-transform: uppercase;
    }
    
    .green-text {
        color: var(--light-green);
        font-size: 18px;
        margin-bottom: 40px;
        max-width: 500px;
        line-height: 1.6;
    }
    
    .floating-leaves {
        position: absolute;
        width: 100%;
        height: 100%;
        top: 0;
        left: 0;
        pointer-events: none;
    }
    
    .floating-leaf {
        position: absolute;
        width: 40px;
        height: auto;
        fill: var(--light-green);
    }
    
    .leaf-float-1 {
        top: 10%;
        right: 20%;
        transform: rotate(15deg);
    }
    
    .leaf-float-2 {
        top: 30%;
        left: 10%;
        transform: rotate(-10deg);
    }
    
    .leaf-float-3 {
        bottom: 20%;
        right: 30%;
        transform: rotate(25deg);
    }
    
    .leaf-float-4 {
        bottom: 40%;
        left: 25%;
        transform: rotate(-20deg);
    }
    
    /* Products Section */
    .products {
        padding: 100px 0;
        background-color: var(--dark-green);
    }
    
    .products-header {
        text-align: center;
        margin-bottom: 60px;
    }
    
    .products-header h2 {
        color: var(--cream);
        font-size: 48px;
        font-weight: 800;
        text-transform: uppercase;
    }
    
    .products-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
        gap: 30px;
    }
    
    .product-card {
        background-color: var(--cream);
        border-radius: 10px;
        overflow: hidden;
        transition: transform 0.3s;
    }
    
    .product-card:hover {
        transform: translateY(-10px);
    }
    
    .product-image {
        height: 200px;
        background-color: var(--light-green);
        display: flex;
        align-items: center;
        justify-content: center;
        color: var(--cream);
        font-weight: 700;
        text-transform: uppercase;
        overflow: hidden;
        position: relative;
    }
    
    .product-image img {
        width: 100%;
        height: 100%;
        object-fit: cover;
        transition: transform 0.5s;
    }
    
    .product-card:hover .product-image img {
        transform: scale(1.1);
    }
    
    .product-info {
        padding: 25px;
    }
    
    .product-info h3 {
        color: var(--dark-green);
        font-size: 22px;
        font-weight: 700;
        margin-bottom: 10px;
    }
    
    .product-info p {
        color: #555;
        margin-bottom: 15px;
    }
    
    .product-price {
        color: var(--brown);
        font-weight: 700;
        font-size: 18px;
        margin-bottom: 15px;
    }
    
    .add-to-cart-btn, .view-products-btn {
        background-color: var(--light-green);
        color: white;
        border: none;
        padding: 8px 15px;
        border-radius: 5px;
        font-weight: 600;
        cursor: pointer;
        transition: all 0.3s;
        font-family: 'Montserrat', sans-serif;
    }
    
    .add-to-cart-btn:hover, .view-products-btn:hover {
        background-color: var(--dark-green);
        transform: translateY(-2px);
    }
    
    .view-products-btn {
        width: 100%;
        padding: 10px 15px;
    }
    
    /* Tagline Section */
    .tagline {
        background-color: var(--cream);
        padding: 80px 0;
        text-align: center;
    }
    
    .tagline h2 {
        color: var(--brown);
        font-size: 60px;
        font-weight: 800;
        text-transform: uppercase;
        margin-bottom: 20px;
        line-height: 1.1;
    }
    
    .tagline p {
        color: var(--brown);
        font-size: 32px;
        font-weight: 700;
        text-transform: uppercase;
    }
    
    /* Footer */
    footer {
        background-color: var(--dark-green);
        color: var(--cream);
        padding: 60px 0 30px;
    }
    
    .footer-content {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
        gap: 40px;
        margin-bottom: 40px;
    }
    
    .footer-section h3 {
        color: var(--light-green);
        font-size: 18px;
        font-weight: 600;
        margin-bottom: 20px;
        text-transform: uppercase;
    }
    
    .footer-section p, .footer-section a {
        color: var(--cream);
        margin-bottom: 10px;
        display: block;
        text-decoration: none;
    }
    
    .footer-section a:hover {
        color: var(--light-green);
    }
    
    .copyright {
        text-align: center;
        padding-top: 30px;
        border-top: 1px solid rgba(255,255,255,0.1);
    }
    
    /* WhatsApp Button */
    .whatsapp-btn {
        position: fixed;
        bottom: 30px;
        right: 30px;
        background-color: #25D366;
        color: white;
        width: 60px;
        height: 60px;
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 30px;
        box-shadow: 0 4px 10px rgba(0,0,0,0.3);
        z-index: 100;
        cursor: pointer;
        transition: all 0.3s;
    }
    
    /* Product Modal */
    .product-modal {
        display: none;
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background-color: rgba(0,0,0,0.7);
        z-index: 1000;
        justify-content: center;
        align-items: center;
    }
    
    .product-modal-content {
        background-color: var(--cream);
        border-radius: 10px;
        width: 90%;
        max-width: 800px;
        max-height: 80vh;
        overflow-y: auto;
        position: relative;
    }
    
    .product-modal-header {
        background-color: var(--dark-green);
        color: var(--cream);
        padding: 15px 20px;
        display: flex;
        justify-content: space-between;
        align-items: center;
        position: sticky;
        top: 0;
        z-index: 10;
    }
    
    .product-modal-header h3 {
        margin: 0;
        font-size: 24px;
    }
    
    .close-product-modal {
        color: var(--cream);
        font-size: 28px;
        font-weight: bold;
        cursor: pointer;
    }
    
    .product-modal-body {
        padding: 20px;
    }
    
    .product-list {
        display: grid;
        grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
        gap: 15px;
    }
    
    .product-item {
        background-color: white;
        border-radius: 12px;
        overflow: hidden;
        box-shadow: 0 4px 12px rgba(0,0,0,0.1);
        transition: transform 0.2s, box-shadow 0.2s;
    }
    
    .product-item:hover {
        transform: translateY(-2px);
        box-shadow: 0 6px 20px rgba(0,0,0,0.15);
    }
    
    .product-item-image {
        height: 180px;
        width: 100%;
        overflow: hidden;
        display: flex;
        align-items: center;
        justify-content: center;
        background-color: #f8f8f8;
    }
    
    .product-item-image img {
        width: 100%;
        height: 100%;
        object-fit: cover;
        transition: transform 0.3s;
    }
    
    .product-item-image img:hover {
        transform: scale(1.05);
    }
    
    .product-item-content {
        padding: 16px;
    }
    
    .product-item h4 {
        color: var(--dark-green);
        margin: 0 0 8px 0;
        font-size: 18px;
        font-weight: 600;
        line-height: 1.3;
    }
    
    .product-item-description {
        color: #666;
        font-size: 14px;
        margin-bottom: 12px;
        line-height: 1.4;
        display: -webkit-box;
        -webkit-line-clamp: 2;
        -webkit-box-orient: vertical;
        overflow: hidden;
    }
    
    .product-item-footer {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-top: 12px;
    }
    
    .product-item-price {
        color: var(--brown);
        font-weight: 700;
        font-size: 18px;
    }
    
    .product-item-availability {
        font-size: 12px;
        padding: 3px 8px;
        border-radius: 3px;
        display: inline-block;
        margin-bottom: 10px;
    }
    
    .in-stock {
        background-color: #e8f5e9;
        color: #2e7d32;
    }
    
    .out-of-stock {
        background-color: #ffebee;
        color: #c62828;
    }
    
    .add-to-cart-btn, .view-products-btn {
        background-color: var(--light-green);
        color: white;
        border: none;
        padding: 8px 15px;
        border-radius: 5px;
        font-weight: 600;
        cursor: pointer;
        transition: all 0.3s;
        font-family: 'Montserrat', sans-serif;
    }
    
    .add-to-cart-btn:hover, .view-products-btn:hover {
        background-color: var(--dark-green);
        transform: translateY(-2px);
    }
    
    .view-products-btn {
        width: 100%;
        padding: 10px 15px;
    }
    
    .add-to-cart-btn.disabled {
        background-color: #cccccc;
        cursor: not-allowed;
    }
    
    .add-to-cart-btn.disabled:hover {
        background-color: #cccccc;
        transform: none;
    }
    
    .whatsapp-btn:hover {
        transform: scale(1.1);
    }
    
    .cart-count {
        position: absolute;
        top: -10px;
        right: -10px;
        background-color: var(--brown);
        color: white;
        width: 24px;
        height: 24px;
        border-radius: 50%;
        font-size: 14px;
        font-weight: 700;
        display: flex;
        align-items: center;
        justify-content: center;
        border: 2px solid white;
    }
    
    /* Responsive */
    @media (max-width: 992px) {
        .hero {
            flex-direction: column;
            height: auto;
        }
        
        .hero-image, .hero-content {
            flex: none;
            height: 50vh;
        }
        
        .hero-text h1 {
            font-size: 60px;
        }
        
        .second-content {
            flex-direction: column;
        }
        
        .brown-title {
            font-size: 48px;
        }
        
        .tagline h2 {
            font-size: 48px;
        }
        
        .tagline p {
            font-size: 24px;
        }
    }
    
    /* Mobile Improvements */
    @media (max-width: 768px) {
        .header-content {
            flex-direction: column;
            gap: 15px;
        }
        
        nav ul {
            margin-top: 15px;
            display: flex;
            justify-content: center;
            flex-wrap: wrap;
        }
        
        nav ul li {
            margin: 5px 10px;
        }
        
        .hero-text h1 {
            font-size: 48px;
        }
        
        .hero-content {
            padding: 0 20px;
        }
        
        .cta-buttons {
            flex-direction: column;
            gap: 15px;
            width: 100%;
        }
        
        .btn {
            width: 100%;
            text-align: center;
        }
        
        .brown-title {
            font-size: 36px;
        }
        
        .tagline h2 {
            font-size: 36px;
        }
        
        .tagline p {
            font-size: 20px;
        }
        
        /* Cart Modal Mobile Improvements */
        .cart-modal-content {
            width: 95%;
            max-height: 90vh;
            border-radius: 15px;
        }
        
        .cart-modal-header h3 {
            font-size: 20px;
        }
        
        .cart-items {
            max-height: 40vh;
        }
        
        .checkout-btn, .phone-btn, .print-btn {
            padding: 15px 0;
            width: 100%;
            margin: 5px 0;
            font-size: 16px;
        }
        
        .alternative-checkout {
            padding: 15px;
        }
        
        /* WhatsApp button position */
        .whatsapp-btn {
            bottom: 20px;
            right: 20px;
        }
    }
    
    /* Small Phones */
    @media (max-width: 375px) {
        .hero-text h1 {
            font-size: 40px;
        }
        
        .product-info h3 {
            font-size: 18px;
        }
        
        .add-to-cart-btn {
            padding: 6px 12px;
            font-size: 14px;
        }
    }

    /* Cart Modal */
    .cart-modal {
        display: none;
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background-color: rgba(0,0,0,0.5);
        z-index: 1001;
        justify-content: center;
        align-items: center;
    }
    
    .cart-modal-content {
        background-color: var(--cream);
        border-radius: 10px;
        width: 90%;
        max-width: 500px;
        max-height: 80vh;
        overflow-y: auto;
        box-shadow: 0 5px 30px rgba(0,0,0,0.3);
    }
    
    .cart-modal-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        padding: 20px;
        border-bottom: 1px solid rgba(0,0,0,0.1);
    }
    
    .cart-modal-header h3 {
        color: var(--dark-green);
        margin: 0;
        font-size: 24px;
    }
    
    .close-cart {
        font-size: 28px;
        font-weight: bold;
        color: #777;
        cursor: pointer;
    }
    
    .close-cart:hover {
        color: var(--dark-green);
    }
    
    .cart-items {
        padding: 20px;
        max-height: 50vh;
        overflow-y: auto;
    }
    
    .empty-cart-message {
        text-align: center;
        padding: 20px;
        color: #777;
        font-style: italic;
    }
    
    .cart-item {
        display: flex;
        justify-content: space-between;
        align-items: center;
        padding: 10px 0;
        border-bottom: 1px solid rgba(0,0,0,0.05);
    }
    
    .cart-item-details {
        flex: 1;
    }
    
    .cart-item-name {
        font-weight: 600;
        color: var(--dark-green);
    }
    
    .cart-item-price {
        color: var(--brown);
        font-size: 14px;
    }
    
    .cart-item-quantity {
        display: flex;
        align-items: center;
        margin-left: 15px;
    }
    
    .quantity-btn {
        width: 25px;
        height: 25px;
        background: var(--light-green);
        color: white;
        border: none;
        border-radius: 50%;
        cursor: pointer;
        font-size: 16px;
        display: flex;
        align-items: center;
        justify-content: center;
    }
    
    .quantity-value {
        margin: 0 10px;
        font-weight: 600;
    }
    
    .cart-total {
        display: flex;
        justify-content: space-between;
        align-items: center;
        padding: 20px;
        border-top: 1px solid rgba(0,0,0,0.1);
        font-weight: 700;
    }
    
    .total-amount {
        color: var(--brown);
        font-size: 20px;
    }
    
    .checkout-btn {
        display: block;
        width: calc(100% - 40px);
        margin: 0 20px 20px;
        padding: 15px;
        background-color: #25D366;
        color: white;
        border: none;
        border-radius: 30px;
        font-size: 16px;
        font-weight: 600;
        cursor: pointer;
        transition: all 0.3s;
    }
    
    .checkout-btn:hover {
        background-color: #1da851;
    }

    .alternative-checkout {
        text-align: center;
        padding: 20px;
        border-top: 1px solid rgba(0,0,0,0.05);
        margin-top: 20px;
    }

    .alternative-checkout p {
        color: #555;
        font-size: 14px;
        margin-bottom: 10px;
    }

    .phone-btn {
        display: inline-block;
        background-color: var(--light-green);
        color: white;
        padding: 10px 20px;
        border-radius: 30px;
        font-weight: 600;
        text-decoration: none;
        transition: background-color 0.3s;
        margin-right: 10px;
    }
    
    .phone-btn:hover {
        background-color: #6A9248;
    }
    
    .print-btn {
        display: inline-block;
        background-color: var(--brown);
        color: white;
        padding: 10px 20px;
        border-radius: 30px;
        font-weight: 600;
        border: none;
        cursor: pointer;
        transition: background-color 0.3s;
    }
    
    .print-btn:hover {
        background-color: #8a6530;
    }

    .small-text {
        color: #777;
        font-size: 12px;
        margin-top: 5px;
    }

    /* Mobile Menu */
    .mobile-menu-toggle {
        display: none;
        flex-direction: column;
        justify-content: space-between;
        width: 30px;
        height: 21px;
        cursor: pointer;
        z-index: 1001;
    }
    
    .mobile-menu-toggle span {
        display: block;
        height: 3px;
        width: 100%;
        background-color: var(--cream);
        border-radius: 3px;
        transition: all 0.3s ease;
    }
    
    @media (max-width: 768px) {
        .mobile-menu-toggle {
            display: flex;
            margin-left: auto;
        }
        
        nav ul {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100vh;
            background-color: var(--dark-green);
            flex-direction: column;
            justify-content: center;
            align-items: center;
            transform: translateY(-100%);
            transition: transform 0.3s ease;
            z-index: 1000;
        }
        
        nav ul.active {
            transform: translateY(0);
        }
        
        nav ul li {
            margin: 15px 0;
        }
        
        .header-content {
            flex-direction: row;
            justify-content: space-between;
            align-items: center;
        }
    }

    /* Product Modal */
    .product-modal {
        display: none;
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background-color: rgba(0,0,0,0.5);
        z-index: 1001;
        justify-content: center;
        align-items: center;
    }
    
    .product-modal-content {
        background-color: var(--cream);
        border-radius: 10px;
        width: 90%;
        max-width: 800px;
        max-height: 80vh;
        overflow-y: auto;
        box-shadow: 0 5px 30px rgba(0,0,0,0.3);
    }
    
    .product-modal-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        padding: 20px;
        border-bottom: 1px solid rgba(0,0,0,0.1);
    }
    
    .product-modal-header h3 {
        color: var(--dark-green);
        margin: 0;
        font-size: 24px;
    }
    
    .close-product-modal {
        font-size: 28px;
        font-weight: bold;
        color: #777;
        cursor: pointer;
    }
    
    .close-product-modal:hover {
        color: var(--dark-green);
    }
    
    .product-modal-body {
        padding: 20px;
    }
    
    .product-list {
        display: grid;
        grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
        gap: 15px;
    }
    
    .product-item {
        background-color: white;
        border-radius: 12px;
        overflow: hidden;
        box-shadow: 0 4px 12px rgba(0,0,0,0.1);
        transition: transform 0.2s, box-shadow 0.2s;
    }
    
    .product-item:hover {
        transform: translateY(-2px);
        box-shadow: 0 6px 20px rgba(0,0,0,0.15);
    }
    
    .product-item-image {
        height: 180px;
        width: 100%;
        overflow: hidden;
        display: flex;
        align-items: center;
        justify-content: center;
        background-color: #f8f8f8;
    }
    
    .product-item-image img {
        width: 100%;
        height: 100%;
        object-fit: cover;
        transition: transform 0.3s;
    }
    
    .product-item-image img:hover {
        transform: scale(1.05);
    }
    
    .product-item-content {
        padding: 16px;
    }
    
    .product-item h4 {
        color: var(--dark-green);
        margin: 0 0 8px 0;
        font-size: 18px;
        font-weight: 600;
        line-height: 1.3;
    }
    
    .product-item-description {
        color: #666;
        font-size: 14px;
        margin-bottom: 12px;
        line-height: 1.4;
        display: -webkit-box;
        -webkit-line-clamp: 2;
        -webkit-box-orient: vertical;
        overflow: hidden;
    }
    
    .product-item-footer {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-top: 12px;
    }
    
    .product-item-price {
        color: var(--brown);
        font-weight: 700;
        font-size: 18px;
    }
    
    /* Mobile optimizations for product list */
    @media (max-width: 768px) {
        .product-list {
            grid-template-columns: repeat(auto-fill, minmax(260px, 1fr));
            gap: 12px;
        }
        
        .product-item-image {
            height: 160px;
        }
        
        .product-item-content {
            padding: 14px;
        }
        
        .add-to-cart-btn {
            padding: 10px 16px;
            font-size: 14px;
            min-height: 44px; /* Apple's recommended touch target */
        }
    }
    
    @media (max-width: 480px) {
        .product-list {
            grid-template-columns: 1fr;
            gap: 10px;
        }
        
        .product-modal-content {
            width: 95%;
            margin: 10px;
        }
        
        .product-modal-body {
            padding: 15px;
        }
    }
    
    /* Notification */
    .notification {
        position: fixed;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        background-color: white;
        border-radius: 10px;
        box-shadow: 0 5px 30px rgba(0,0,0,0.3);
        width: 90%;
        max-width: 400px;
        z-index: 2000;
        display: none;
        overflow: hidden;
    }
    
    .notification.show {
        display: block;
        animation: fadeIn 0.3s;
    }
    
    .notification-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        padding: 15px;
        border-bottom: 1px solid #eee;
    }
    
    .notification-title {
        font-size: 18px;
        font-weight: 600;
        color: #333;
    }
    
    .notification-close {
        font-size: 24px;
        color: #999;
        cursor: pointer;
    }
    
    .notification-body {
        padding: 20px 15px;
    }
    
    .notification-message {
        margin-bottom: 15px;
    }
    
    .notification-checkbox {
        display: flex;
        align-items: center;
        margin: 15px 0;
    }
    
    .notification-checkbox input {
        margin-right: 10px;
    }
    
    .notification-actions {
        display: flex;
        justify-content: flex-end;
    }
    
    .notification-btn {
        background-color: #1a73e8;
        color: white;
        border: none;
        border-radius: 4px;
        padding: 8px 16px;
        font-weight: 500;
        cursor: pointer;
    }
    
    .notification-overlay {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background-color: rgba(0,0,0,0.5);
        z-index: 1999;
        display: none;
    }
    
    .notification-overlay.show {
        display: block;
        animation: fadeIn 0.3s;
    }
    
    @keyframes fadeIn {
        from { opacity: 0; }
        to { opacity: 1; }
    }
</style>
</head>
<body>
    <header>
        <div class="container">
            <div class="header-content">
                <div class="logo">Suruli Greens</div>
                <nav>
                    <div class="mobile-menu-toggle" id="mobileMenuToggle">
                        <span></span>
                        <span></span>
                        <span></span>
                    </div>
                    <ul id="navMenu">
                        <li><a href="#">Home</a></li>
                        <li><a href="#">Shop</a></li>
                        <li><a href="#">About</a></li>
                        <li><a href="#" class="order-btn" id="headerOrderBtn">Order Now</a></li>
                    </ul>
                </nav>
            </div>
        </div>
    </header>

    <section class="hero">
        <div class="hero-image">
            <!-- Image is set in CSS as background -->
        </div>
        <div class="hero-content">
            <!-- Decorative leaves -->
            <svg class="leaf leaf-1" viewBox="0 0 100 50" xmlns="http://www.w3.org/2000/svg">
                <path d="M10,25 Q30,5 50,25 T90,25" />
                <path d="M10,25 Q30,45 50,25 T90,25" />
            </svg>
            <svg class="leaf leaf-2" viewBox="0 0 100 50" xmlns="http://www.w3.org/2000/svg">
                <path d="M10,25 Q30,5 50,25 T90,25" />
                <path d="M10,25 Q30,45 50,25 T90,25" />
            </svg>
            <svg class="leaf leaf-3" viewBox="0 0 100 50" xmlns="http://www.w3.org/2000/svg">
                <path d="M10,25 Q30,5 50,25 T90,25" />
                <path d="M10,25 Q30,45 50,25 T90,25" />
            </svg>
            
            <div class="hero-text">
                <h1>Greens<br>With<br>Attitude</h1>
                <p>fresh, pesticide-free hydroponic microgreens & greens grown sustainably at suruli greens</p>
                <div class="cta-buttons">
                    <a href="#products" class="btn btn-primary">Shop Now</a>
                    <a href="#about" class="btn btn-secondary">Learn More</a>
                </div>
            </div>
        </div>
    </section>

    <section class="second-section" id="about">
        <div class="container">
            <div class="second-content">
                <div class="second-text">
                    <h3 class="green-title">Suruli Greens</h3>
                    <h2 class="brown-title">Harvested Today.<br>Delivered To Tomorrow.</h2>
                    <p class="green-text">fresh, pesticide-free hydroponic microgreens & greens grown sustainably at suruli greens</p>
                    <div class="cta-buttons">
                        <a href="#products" class="btn btn-primary">Shop Greens</a>
                        <a href="#" class="btn btn-secondary">Learn More</a>
                    </div>
                </div>
                <div class="second-image">
                    <img src="assets/images/categories/Microgreens.jpeg" alt="Microgreens in trays">
                    <!-- Floating leaves decoration -->
                    <div class="floating-leaves">
                        <svg class="floating-leaf leaf-float-1" viewBox="0 0 50 50" xmlns="http://www.w3.org/2000/svg">
                            <path d="M25,5 Q40,20 25,45 Q10,20 25,5" />
                        </svg>
                        <svg class="floating-leaf leaf-float-2" viewBox="0 0 50 50" xmlns="http://www.w3.org/2000/svg">
                            <path d="M25,5 Q40,20 25,45 Q10,20 25,5" />
                        </svg>
                        <svg class="floating-leaf leaf-float-3" viewBox="0 0 50 50" xmlns="http://www.w3.org/2000/svg">
                            <path d="M25,5 Q40,20 25,45 Q10,20 25,5" />
                        </svg>
                        <svg class="floating-leaf leaf-float-4" viewBox="0 0 50 50" xmlns="http://www.w3.org/2000/svg">
                            <path d="M25,5 Q40,20 25,45 Q10,20 25,5" />
                        </svg>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <section class="products" id="products">
        <div class="container">
            <div class="products-header">
                <h2>Our Product Categories</h2>
            </div>
            <div class="products-grid">
                <!-- Product categories will be populated here from JavaScript -->
            </div>
        </div>
    </section>
    
    <!-- Product Details Modal -->
    <div class="product-modal" id="productModal">
        <div class="product-modal-content">
            <div class="product-modal-header">
                <h3 id="productCategoryTitle">Category Products</h3>
                <span class="close-product-modal">&times;</span>
            </div>
            <div class="product-modal-body">
                <!-- Individual products will be populated here -->
            </div>
        </div>
    </div>

    <section class="tagline">
        <div class="container">
            <h2>We Grow It Like<br>Nobody Else.</h2>
            <p>Hydroponic. Zero BS.</p>
        </div>
    </section>

    <footer>
        <div class="container">
            <div class="footer-content">
                <div class="footer-section">
                    <h3>Contact Us</h3>
                    <p>WhatsApp: +91 9840970514</p>
                    <p>Email: hello@suruligreens.com</p>
                    <p>Chennai, Tamil Nadu</p>
                </div>
                <div class="footer-section">
                    <h3>Shop</h3>
                    <a href="#">Microgreens</a>
                    <a href="#">Leafy Greens</a>
                    <a href="#">Herb Packs</a>
                    <a href="#">Subscriptions</a>
                </div>
                <div class="footer-section">
                    <h3>About</h3>
                    <a href="#">Our Story</a>
                    <a href="#">Growing Methods</a>
                    <a href="#">Sustainability</a>
                    <a href="#">FAQ</a>
                </div>
                <div class="footer-section">
                    <h3>Delivery</h3>
                    <p>Free delivery on orders above ₹500</p>
                    <p>Same-day delivery available</p>
                    <p>Delivery zones: Chennai city limits</p>
                </div>
            </div>
            <div id="deliveryInfo" style="text-align: center; margin: 20px 0; padding: 15px; background-color: var(--light-green); color: white; border-radius: 5px; font-weight: bold;">
                Pick up your order at the Edina Lobby, at 6pm on Tuesdays or Fridays
            </div>
            <div class="copyright">
                <p>&copy; 2023 Suruli Greens. All rights reserved.</p>
            </div>
        </div>
    </footer>

    <!-- WhatsApp Button -->
    <div class="whatsapp-btn">
        <svg width="30" height="30" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M20.4054 3.5875C18.1607 1.3425 15.1714 0 11.9946 0C5.4375 0 0.09375 5.34375 0.09375 11.9062C0.09375 14.0062 0.6875 16.0312 1.79464 17.7857L0 24L6.34821 22.2321C8.03571 23.25 9.98036 23.7857 11.9893 23.7857H11.9946C18.5464 23.7857 24 18.4419 24 11.8795C24 8.70804 22.65 5.83393 20.4054 3.5875ZM11.9946 21.7634C10.2321 21.7634 8.50714 21.2491 7.03125 20.2902L6.67232 20.0759L2.89286 21.1071L3.9375 17.4107L3.70179 17.0357C2.65179 15.5089 2.10268 13.7304 2.10268 11.9062C2.10268 6.45536 6.54911 2.01786 12 2.01786C14.6518 2.01786 17.1321 3.12054 19.0179 5.01161C20.9036 6.90268 22.0179 9.38304 22.0125 11.8795C22.0125 17.3357 17.4402 21.7634 11.9946 21.7634ZM17.4107 14.4107C17.1161 14.2634 15.6589 13.5482 15.3857 13.4491C15.1125 13.35 14.9143 13.3018 14.7161 13.5964C14.5179 13.8911 13.9554 14.5554 13.7786 14.7536C13.6071 14.9518 13.4304 14.9732 13.1357 14.8259C11.3839 13.9554 10.2375 13.275 9.08571 11.2848C8.8125 10.8214 9.42321 10.8589 9.99107 9.72321C10.0902 9.525 10.0421 9.35357 9.96964 9.20625C9.89732 9.05893 9.30268 7.60179 9.05357 7.0125C8.81071 6.4393 8.56161 6.52232 8.38036 6.51161C8.20893 6.50089 8.01071 6.50089 7.8125 6.50089C7.61429 6.50089 7.29107 6.57321 7.01786 6.86786C6.74464 7.1625 5.98125 7.87768 5.98125 9.33482C5.98125 10.7921 7.04464 12.2009 7.19196 12.3991C7.33929 12.5973 9.29464 15.5839 12.2679 16.8589C14.1107 17.6732 14.8446 17.7375 15.7714 17.5929C16.3339 17.5018 17.5071 16.8696 17.7562 16.1786C18.0054 15.4875 18.0054 14.8982 17.9331 14.7536C17.8661 14.5982 17.7054 14.5125 17.4107 14.4107Z" fill="white"/>
        </svg>
        <div class="cart-count" style="display: none;">0</div>
    </div>
    
    <!-- Cart Modal -->
    <div class="cart-modal" id="cartModal">
        <div class="cart-modal-content">
            <div class="cart-modal-header">
                <h3>Your Cart</h3>
                <span class="close-cart">&times;</span>
            </div>
            <div class="cart-items">
                <!-- Cart items will be populated here -->
                <div class="empty-cart-message">Your cart is empty</div>
            </div>
            <div class="cart-total">
                <div class="total-text">Total:</div>
                <div class="total-amount">₹0</div>
            </div>
            <button class="checkout-btn">Order via WhatsApp</button>
            <div class="alternative-checkout">
                <p>Not comfortable with WhatsApp?</p>
                <a href="tel:+919840970514" class="phone-btn">Call us to order</a>
                <button class="print-btn" onclick="printOrder()">Print Order</button>
                <p class="small-text">Or simply note down your items and call +91 9840970514</p>
            </div>
        </div>
    </div>

    <!-- Notification -->
    <div class="notification" id="notification">
        <div class="notification-header">
            <span class="notification-title">Order Confirmation</span>
            <span class="notification-close">&times;</span>
        </div>
        <div class="notification-body">
            <p class="notification-message">Your order has been received! You will receive a confirmation on WhatsApp shortly.</p>
            <div class="notification-checkbox">
                <input type="checkbox" id="dontShowAgain">
                <label for="dontShowAgain">Don't show this again</label>
            </div>
            <div class="notification-actions">
                <button class="notification-btn">OK</button>
            </div>
        </div>
    </div>
    <div class="notification-overlay" id="notificationOverlay"></div>

    <!-- Include configuration and products data files -->
    <script src="config.js"></script>
    <script src="products.js"></script>
    <script src="debug.js"></script>
    <script>
        // Shopping cart functionality
        let cart = [];
        const cartModal = document.getElementById('cartModal');
        const closeCart = document.querySelector('.close-cart');
        const checkoutBtn = document.querySelector('.checkout-btn');
        
        // Product modal functionality
        const productModal = document.getElementById('productModal');
        const closeProductModal = document.querySelector('.close-product-modal');
        const productCategoryTitle = document.getElementById('productCategoryTitle');
        const productModalBody = document.querySelector('.product-modal-body');
        
        // Notification functionality
        const notification = document.getElementById('notification');
        const notificationOverlay = document.getElementById('notificationOverlay');
        const dontShowAgainCheckbox = document.getElementById('dontShowAgain');
        const notificationClose = document.querySelector('.notification-close');
        const notificationBtn = document.querySelector('.notification-btn');

        function showNotification(message, type = 'info') {
            notification.textContent = message;
            notification.className = 'notification'; // Clear previous classes
            notification.classList.add('show', type);
            notificationOverlay.classList.add('show');

            if (dontShowAgainCheckbox.checked) {
                localStorage.setItem('showNotification', 'false');
            }

            setTimeout(() => {
                notification.classList.remove('show', type);
                notificationOverlay.classList.remove('show');
            }, 3000); // Hide after 3 seconds
        }

        function closeNotification() {
            notification.classList.remove('show');
            notificationOverlay.classList.remove('show');
        }

        // WhatsApp button functionality
        function openWhatsApp() {
            const phoneNumber = "919840970514"; // No plus sign, just country code and number
            const message = "Hi Suruli Greens! I'm interested in ordering some microgreens.";
            const encodedMessage = encodeURIComponent(message);
            window.open(`https://wa.me/${phoneNumber}?text=${encodedMessage}`, "_blank");
        }
        
        // Add to cart functionality
        function addToCart(productName, price, quantity = 1) {
            // Check if product already exists in cart
            const existingProduct = cart.find(item => item.name === productName);
            
            if (existingProduct) {
                existingProduct.quantity += quantity;
            } else {
                cart.push({
                    name: productName,
                    price: price,
                    quantity: quantity
                });
            }
            
            updateCartCount();
            updateCartDisplay();
            console.log("Cart updated:", cart);
        }
        
        // Update cart count badge
        function updateCartCount() {
            const cartCountElement = document.querySelector('.cart-count');
            if (cartCountElement) {
                const totalItems = cart.reduce((total, item) => total + item.quantity, 0);
                cartCountElement.textContent = totalItems;
                
                // Show/hide count based on items
                cartCountElement.style.display = totalItems > 0 ? 'flex' : 'none';
                
                // Show/hide empty cart message
                const emptyCartMessage = document.querySelector('.empty-cart-message');
                if (emptyCartMessage) {
                    emptyCartMessage.style.display = totalItems > 0 ? 'none' : 'block';
                }
            }
        }
        
        // Update cart items in modal
        function updateCartDisplay() {
            const cartItemsContainer = document.querySelector('.cart-items');
            const totalAmountElement = document.querySelector('.total-amount');
            
            if (!cartItemsContainer) return;
            
            // Clear current items (except empty message)
            const currentItems = cartItemsContainer.querySelectorAll('.cart-item');
            currentItems.forEach(item => item.remove());
            
            // Add each cart item
            let totalAmount = 0;
            
            cart.forEach((item, index) => {
                const itemTotal = item.price * item.quantity;
                totalAmount += itemTotal;
                
                const cartItemElement = document.createElement('div');
                cartItemElement.classList.add('cart-item');
                cartItemElement.innerHTML = `
                    <div class="cart-item-details">
                        <div class="cart-item-name">${item.name}</div>
                        <div class="cart-item-price">₹${item.price} × ${item.quantity} = ₹${itemTotal}</div>
                    </div>
                    <div class="cart-item-quantity">
                        <button class="quantity-btn decrease" data-index="${index}">-</button>
                        <span class="quantity-value">${item.quantity}</span>
                        <button class="quantity-btn increase" data-index="${index}">+</button>
                    </div>
                `;
                
                cartItemsContainer.insertBefore(cartItemElement, document.querySelector('.empty-cart-message'));
                
                // Add event listeners to quantity buttons
                cartItemElement.querySelector('.decrease').addEventListener('click', function() {
                    updateItemQuantity(index, -1);
                });
                
                cartItemElement.querySelector('.increase').addEventListener('click', function() {
                    updateItemQuantity(index, 1);
                });
            });
            
            // Update total
            if (totalAmountElement) {
                totalAmountElement.textContent = `₹${totalAmount}`;
            }
        }
        
        // Update item quantity
        function updateItemQuantity(index, change) {
            if (index >= 0 && index < cart.length) {
                cart[index].quantity += change;
                
                // Remove item if quantity is 0
                if (cart[index].quantity <= 0) {
                    cart.splice(index, 1);
                }
                
                updateCartCount();
                updateCartDisplay();
            }
        }
        
        // Send cart to WhatsApp
        let isCheckingOut = false;

        async function sendCartToWhatsApp() {
            if (cart.length === 0 || isCheckingOut) {
                alert("Your cart is empty. Please add some items first.");
                return;
            }
            // Guard and close the cart immediately to avoid lingering UI
            isCheckingOut = true;
            const originalCheckoutText = checkoutBtn ? checkoutBtn.textContent : '';
            if (checkoutBtn) {
                checkoutBtn.disabled = true;
                checkoutBtn.textContent = 'Processing...';
            }
            if (cartModal) {
                cartModal.style.display = 'none';
            }
            
            // Format the order for WhatsApp
            let orderText = "Hi Suruli Greens! I'd like to place an order for:\n\n";
            
            cart.forEach(item => {
                orderText += `${item.quantity}x ${item.name} - ₹${item.price * item.quantity}\n`;
            });
            
            const totalAmount = cart.reduce((total, item) => total + (item.price * item.quantity), 0);
            orderText += `\nTotal: ₹${totalAmount}`;
            orderText += "\n\nPlease confirm my order. Thanks!";
            
            // Encode the text for URL
            const encodedText = encodeURIComponent(orderText);
            
            // Persist order to Google Sheets via Apps Script before opening WhatsApp
            let orderSaved = false;
            try {
                const scriptUrl = (typeof config !== 'undefined' && config.GOOGLE_SCRIPT_URL) ? config.GOOGLE_SCRIPT_URL : '';
                console.log('[Order Debug] Script URL:', scriptUrl);
                console.log('[Order Debug] Config available:', typeof config !== 'undefined');
                
                if (scriptUrl) {
                    console.log('[Order] Saving order to Google Sheets...');
                    const payload = {
                        type: 'new_order',
                        customerId: config.WHATSAPP_NUMBER || 'website',
                        items: cart,
                        totalAmount,
                        timestamp: new Date().toISOString()
                    };
                    console.log('[Order Debug] Payload:', payload);
                    
                    // Try text/plain to bypass CORS preflight, with GET fallback
                    let response;
                    try {
                        console.log('[Order Debug] Attempting POST with text/plain...');
                        response = await fetch(scriptUrl, {
                            method: 'POST',
                            headers: { 'Content-Type': 'text/plain;charset=utf-8' },
                            body: JSON.stringify(payload),
                            redirect: 'follow'
                        });
                    } catch (corsError) {
                        console.log('[Order Debug] POST failed, trying GET fallback...', corsError.message);
                        // Fallback: Use GET with URL parameters (Apps Script supports this)
                        const params = new URLSearchParams({
                            via: 'get_fallback',
                            type: 'new_order',
                            customerId: payload.customerId,
                            items: JSON.stringify(payload.items),
                            totalAmount: payload.totalAmount.toString(),
                            timestamp: payload.timestamp
                        });
                        response = await fetch(`${scriptUrl}?${params}`, {
                            method: 'GET',
                            redirect: 'follow'
                        });
                    }
                    
                    console.log('[Order Debug] Response status:', response.status);
                    console.log('[Order Debug] Response ok:', response.ok);
                    
                    if (response.ok) {
                        const result = await response.json();
                        console.log('[Order Debug] Response JSON:', result);
                        if (result.success) {
                            orderSaved = true;
                            console.log('[Order] Successfully saved to Google Sheets:', result.orderId);
                            alert('✅ Order saved successfully! Order ID: ' + result.orderId);
                        } else {
                            console.error('[Order] Failed to save to Google Sheets:', result.error);
                            alert('❌ Failed to save order: ' + result.error);
                        }
                    } else {
                        console.error('[Order] HTTP error saving to Google Sheets:', response.status);
                        const errorText = await response.text();
                        console.error('[Order Debug] Error response body:', errorText);
                        alert('❌ HTTP error saving order: ' + response.status + ' ' + response.statusText);
                    }
                } else {
                    console.warn('[Order] No Google Script URL configured');
                    alert('⚠️ Order saving not configured - missing Google Script URL');
                }
            } catch (error) {
                console.error('[Order] Error saving to Google Sheets:', error);
                alert('❌ Error saving order: ' + error.message);
            }
            
            // Show user feedback about order status
            if (orderSaved) {
                alert('✅ Order saved! Opening WhatsApp to confirm with Suruli Greens...');
            } else {
                const proceed = confirm('⚠️ Unable to save order to our system. Would you still like to send via WhatsApp? (Please mention this issue when you contact us)');
                if (!proceed) {
                    isCheckingOut = false;
                    return;
                }
            }

            // Try multiple formats for maximum compatibility
            // Format 1: Direct mobile number with international format (most reliable)
            const phoneNumber = "919840970514"; // No plus sign, just country code and number
            const whatsappUrl = `https://wa.me/${phoneNumber}?text=${encodedText}`;
            
            // Open WhatsApp with the pre-filled message (no browser POSTs)
            window.open(whatsappUrl, "_blank");

            // Clear the cart deterministically and update UI
            cart = [];
            updateCartCount();
            updateCartDisplay();

            // Show confirmation notification
            showNotification('Your order has been received! You will receive a confirmation on WhatsApp shortly.');

            // Reset button state after brief delay
            setTimeout(() => {
                if (checkoutBtn) {
                    checkoutBtn.disabled = false;
                    checkoutBtn.textContent = originalCheckoutText || 'Order via WhatsApp';
                }
                isCheckingOut = false;
            }, 1000);
        }
        
        // Note: Browser does not POST orders. Server will parse the WhatsApp message and store the order.
        
        // Helper function to get product category by name
        function getProductCategory(productName) {
            // Search through product data to find the category
            for (const categoryName in productData) {
                const products = productData[categoryName].products;
                if (products.some(product => product.name === productName)) {
                    return categoryName;
                }
            }
            return "Uncategorized";
        }
        
        // Simulate MCP server response (for testing)
        function simulateMCPResponse(orderData) {
            console.log('Simulating MCP server response...');
            
            // Simulate Claude processing the order
            setTimeout(() => {
                console.log('Order processed by Claude AI');
                console.log('Order added to fulfillment queue');
                console.log('Confirmation message sent to customer via WhatsApp');
                
                // In a real implementation, the MCP server would send a WhatsApp message to the customer
                alert('Your order has been received! You will receive a confirmation on WhatsApp shortly.');
                
                // Clear the cart after successful order
                cart = [];
                updateCartCount();
                updateCartDisplay();
            }, 2000);
        }
        
        // Initialize when DOM is loaded
        document.addEventListener('DOMContentLoaded', function() {
            // Populate product categories
            populateProductCategories();
            
            // Set up product category click events
            setupProductCategoryEvents();
            
            // Set up product modal events
            setupProductModalEvents();
            
            // Set up WhatsApp button to open cart modal
            const whatsappBtn = document.querySelector('.whatsapp-btn');
            if (whatsappBtn) {
                whatsappBtn.addEventListener('click', function(e) {
                    e.preventDefault();
                    // Show cart or scroll to products if empty
                    if (cart && cart.length > 0) {
                        cartModal.style.display = 'flex';
                    } else {
                        document.getElementById('products')?.scrollIntoView({ behavior: 'smooth' });
                    }
                });
            }
            
            // Set up header Order Now button to open cart modal
            const headerOrderBtn = document.getElementById('headerOrderBtn');
            if (headerOrderBtn) {
                headerOrderBtn.addEventListener('click', function(e) {
                    e.preventDefault();
                    // Prefer guiding user to products unless items are already in cart
                    if (cart && cart.length > 0) {
                        cartModal.style.display = 'flex';
                    } else {
                        document.getElementById('products')?.scrollIntoView({ behavior: 'smooth' });
                    }
                });
            }
            
            // Close cart modal when clicking X
            if (closeCart) {
                closeCart.addEventListener('click', function() {
                    cartModal.style.display = 'none';
                });
            }
            
            // Close cart modal when clicking outside
            window.addEventListener('click', function(e) {
                if (e.target === cartModal) {
                    cartModal.style.display = 'none';
                }
            });
            
            // Set up checkout button
            if (checkoutBtn) {
                checkoutBtn.addEventListener('click', sendCartToWhatsApp);
            }
            
            // Initialize cart count
            updateCartCount();
            
            // Mobile menu toggle
            const mobileMenuToggle = document.getElementById('mobileMenuToggle');
            const navMenu = document.getElementById('navMenu');
            
            if (mobileMenuToggle && navMenu) {
                mobileMenuToggle.addEventListener('click', function() {
                    navMenu.classList.toggle('active');
                    document.body.classList.toggle('menu-open');
                });
                
                // Close menu when clicking a link
                const navLinks = navMenu.querySelectorAll('a');
                navLinks.forEach(link => {
                    link.addEventListener('click', function() {
                        navMenu.classList.remove('active');
                        document.body.classList.remove('menu-open');
                    });
                });
            }

            // Load delivery config from Apps Script
            loadDeliveryConfig();

            // Notification close functionality
            if (notificationClose) {
                notificationClose.addEventListener('click', closeNotification);
            }

            // Notification overlay click to close
            if (notificationOverlay) {
                notificationOverlay.addEventListener('click', closeNotification);
            }

            // Initial check for notification preference
            const showNotificationPreference = localStorage.getItem('showNotification');
            if (showNotificationPreference === 'false') {
                notification.style.display = 'none';
                notificationOverlay.style.display = 'none';
            }
        });

        // Fetch delivery config from Google Apps Script and update footer
        function loadDeliveryConfig() {
            const scriptUrl = (typeof config !== 'undefined' && config.GOOGLE_SCRIPT_URL) ? config.GOOGLE_SCRIPT_URL : '';
            const infoEl = document.getElementById('deliveryInfo');
            if (!infoEl) return;
            if (!scriptUrl) return; // keep default text when not configured
            fetch(`${scriptUrl}?action=config`).then(r=>r.json()).then(data=>{
                if (!data.success) return;
                const cfg = data.config;
                const days = (cfg.deliveryDayNames || []).join(' or ');
                const time = cfg.deliveryTime || '6:00 PM';
                const loc = cfg.deliveryLocation || 'Edina Lobby';
                infoEl.textContent = `Pick up your order at the ${loc}, at ${time} on ${days}`;
            }).catch(()=>{});
        }

        // Populate product categories in the grid
        function populateProductCategories() {
            const productsGrid = document.querySelector('.products-grid');
            if (!productsGrid) return;
            
            // Clear existing content
            productsGrid.innerHTML = '';
            
            // Add each product category
            for (const categoryName in productData) {
                const category = productData[categoryName];
                
                const categoryCard = document.createElement('div');
                categoryCard.classList.add('product-card');
                categoryCard.dataset.category = categoryName;
                
                categoryCard.innerHTML = `
                    <div class="product-image">
                        <img src="${category.image}" alt="${categoryName}">
                    </div>
                    <div class="product-info">
                        <h3>${categoryName}</h3>
                        <p>${category.description}</p>
                        <div class="product-price">From ₹${getLowestPrice(category.products)}</div>
                        <button class="view-products-btn">View Products</button>
                    </div>
                `;
                
                productsGrid.appendChild(categoryCard);
            }
        }
        
        // Get the lowest price from a category's products
        function getLowestPrice(products) {
            if (!products || products.length === 0) return 0;
            return Math.min(...products.map(product => product.price));
        }
        
        // Set up click events for product categories
        function setupProductCategoryEvents() {
            const productCards = document.querySelectorAll('.product-card');
            
            productCards.forEach(card => {
                card.addEventListener('click', function() {
                    const categoryName = this.dataset.category;
                    showProductsModal(categoryName);
                });
                
                // Also set up the View Products button
                const viewBtn = card.querySelector('.view-products-btn');
                if (viewBtn) {
                    viewBtn.addEventListener('click', function(e) {
                        e.stopPropagation(); // Prevent card click
                        const categoryName = card.dataset.category;
                        showProductsModal(categoryName);
                    });
                }
            });
        }
        
            // Show the products modal for a specific category (with product images)
            function showProductsModal(categoryName) {
            const category = productData[categoryName];
            if (!category) return;
            
            // Set the modal title
            productCategoryTitle.textContent = categoryName;
            
            // Clear and populate the modal body
            productModalBody.innerHTML = '';
            
            // Create product list container
            const productList = document.createElement('div');
            productList.classList.add('product-list');
            // Add each product (include image; resolve relative paths)
            category.products.forEach(product => {
                const productItem = document.createElement('div');
                productItem.classList.add('product-item');

                const resolvedImage = (product.imageUrl && typeof toAbsoluteUrl === 'function')
                  ? toAbsoluteUrl(product.imageUrl)
                  : `https://source.unsplash.com/300x200/?${encodeURIComponent((product.name||'').toLowerCase())}`;

                productItem.innerHTML = `
                    <div class="product-item-image">
                        <img src="${resolvedImage}" alt="${product.name}" onerror="this.src='https://via.placeholder.com/300x180/f0f0f0/999?text=${encodeURIComponent(product.name)}'">
                    </div>
                    <div class="product-item-content">
                        <h4>${product.name}</h4>
                        <div class="product-item-description">${product.description}</div>
                        <div class="product-item-footer">
                            <div class="product-item-price">₹${product.price}</div>
                            <button class="add-to-cart-btn" data-name="${product.name}" data-price="${product.price}">Add to Cart</button>
                        </div>
                    </div>
                `;
                
                productList.appendChild(productItem);
            });
            
            productModalBody.appendChild(productList);
            
            // Add click events to the Add to Cart buttons
            const addToCartButtons = productModalBody.querySelectorAll('.add-to-cart-btn');
            addToCartButtons.forEach(button => {
                button.addEventListener('click', function() {
                    const productName = this.dataset.name;
                    const price = parseInt(this.dataset.price);
                    
                    addToCart(productName, price);
                    
                    // Show confirmation
                    this.textContent = "Added!";
                    this.style.backgroundColor = "#4a7c59";
                    
                    setTimeout(() => {
                        this.textContent = "Add to Cart";
                        this.style.backgroundColor = "";
                    }, 1000);
                });
            });
            
            // Show the modal
            productModal.style.display = 'flex';
        }
        
        // Set up product modal events
        function setupProductModalEvents() {
            // Close modal when clicking X
            if (closeProductModal) {
                closeProductModal.addEventListener('click', function() {
                    productModal.style.display = 'none';
                });
            }
            
            // Close modal when clicking outside
            window.addEventListener('click', function(e) {
                if (e.target === productModal) {
                    productModal.style.display = 'none';
                }
            });
        }

        // Print Order Function
        function printOrder() {
            if (cart.length === 0) {
                alert("Your cart is empty. Please add some items first.");
                return;
            }
            
            // Calculate total
            let totalAmount = 0;
            for (let i = 0; i < cart.length; i++) {
                totalAmount += cart[i].price * cart[i].quantity;
            }
            
            // Generate a simple reference code
            let refCode = 'REF-' + Math.floor(Math.random() * 10000);
            
            // Create a simple printable version
            let printWindow = window.open('', '_blank');
            if (printWindow) {
                printWindow.document.write('<html><head><title>Your Order</title>');
                printWindow.document.write('<style>body{font-family:Arial;padding:20px}</style>');
                printWindow.document.write('</head><body>');
                printWindow.document.write('<h1>Your Suruli Greens Order</h1>');
                printWindow.document.write('<p>Date: ' + new Date().toLocaleDateString() + '</p>');
                
                // Add items
                printWindow.document.write('<h2>Items:</h2>');
                for (let i = 0; i < cart.length; i++) {
                    let item = cart[i];
                    printWindow.document.write('<p>' + item.quantity + 'x ' + item.name + ' - ₹' + item.price * item.quantity + '</p>');
                }
                
                // Add total and contact
                printWindow.document.write('<h3>Total: ₹' + totalAmount + '</h3>');
                printWindow.document.write('<hr>');
                printWindow.document.write('<p>Call to order: +91 9840970514</p>');
                printWindow.document.write('<p>Reference: ' + refCode + '</p>');
                
                // Print automatically
                printWindow.document.write('<script>window.print();<\/script>');
                printWindow.document.write('</body></html>');
                printWindow.document.close();
            } else {
                alert("Please allow pop-ups to print your order");
            }
        }
    </script>
</body>
</html>